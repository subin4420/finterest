import{u as y,a as m,r as _,c as h,b as d,d as a,e as t,t as u,w as p,v as c,f as k,j as x,k as V,g as S,l as N,o as f}from"./index-BaR3L1cK.js";import{a as P}from"./authApi-BjsTz3bv.js";const B={class:"mt-5 mx-auto",style:{width:"500px"}},C={class:"mb-3 mt-3"},j={class:"mb-3 mt-3"},A={class:"mb-3 mt-3"},D={class:"mb-3"},E={key:0,class:"text-danger"},M={class:"text-center"},T=["disabled"],z={__name:"ProfilePage",setup(U){const l=y(),r=m(null),v=`/api/member/${l.username}/avatar`,e=_({username:l.username,email:l.email,password:"",avatar:null}),o=m(""),b=h(()=>!e.email||!e.password),g=async()=>{if(r.value.files.length>0&&(e.avatar=r.value.files[0]),console.log(l),!!confirm("수정하시겠습니까?"))try{await P.update(e),o.value="",l.changeProfile(e),alert("정보를 수정하였습니다.")}catch(i){console.log(i),o.value=i.response.data}};return(i,s)=>{const w=N("router-link");return f(),d("div",B,[s[7]||(s[7]=a("h1",null,[a("i",{class:"fa-solid fa-user-gear my-3"}),t(" 회원 정보")],-1)),a("form",{onSubmit:S(g,["prevent"])},[a("div",C,[a("img",{src:v,class:"avatar avatar-lg me-4"}),t(" "+u(e.username),1)]),a("div",j,[s[2]||(s[2]=a("label",{for:"avatar",class:"form-label"},[a("i",{class:"fa-solid fa-user-astronaut"}),t(" 아바타 이미지: ")],-1)),a("input",{type:"file",class:"form-control",ref_key:"avatar",ref:r,id:"avatar",accept:"image/png, image/jpeg"},null,512)]),a("div",A,[s[3]||(s[3]=a("label",{for:"email",class:"form-label"},[a("i",{class:"fa-solid fa-envelope"}),t(" email ")],-1)),p(a("input",{type:"email",class:"form-control",placeholder:"Email",id:"email","onUpdate:modelValue":s[0]||(s[0]=n=>e.email=n)},null,512),[[c,e.email]])]),a("div",D,[s[4]||(s[4]=a("label",{for:"password",class:"form-label"},[a("i",{class:"fa-solid fa-lock"}),t(" 비밀번호: ")],-1)),p(a("input",{type:"password",class:"form-control",placeholder:"비밀번호",id:"password","onUpdate:modelValue":s[1]||(s[1]=n=>e.password=n)},null,512),[[c,e.password]])]),o.value?(f(),d("div",E,u(o.value),1)):k("",!0),a("div",M,[a("button",{type:"submit",class:"btn btn-primary mt-4 me-3",disabled:b.value},s[5]||(s[5]=[a("i",{class:"fa-solid fa-user-plus"},null,-1),t(" 확인 ")]),8,T),x(w,{class:"btn btn-primary mt-4",to:"/auth/changepassword"},{default:V(()=>s[6]||(s[6]=[a("i",{class:"fa-solid fa-lock"},null,-1),t(" 비밀번호 변경 ")])),_:1})])],32)])}}};export{z as default};
