import{m as _,_ as S,o as i,b as a,d as o,w as f,v as L,F as C,p as y,n as g,t as n,T as v,q as T,s as I,j as d,l}from"./index-D-3yqlxH.js";const k=_("stock",{state:()=>({selectedStockCode:null}),actions:{setSelectedStockCode(t){this.selectedStockCode=t}}}),K={props:{kospiStockList:Array},data(){return{searchQuery:"",filteredStockList:[]}},computed:{stockStore(){return k()},displayedStockList(){return this.searchQuery?this.filteredStockList.length>0?this.filteredStockList:this.uniqueKospiStockList:this.uniqueKospiStockList.sort((t,e)=>e.mrktTotAmt-t.mrktTotAmt)},uniqueKospiStockList(){const t=new Set;return this.kospiStockList.filter(e=>t.has(e.srtnCd)?!1:(t.add(e.srtnCd),!0))}},methods:{filterData(){const t=this.searchQuery.toLowerCase();this.filteredStockList=this.uniqueKospiStockList.filter(e=>e.itmsNm.toLowerCase().includes(t))},selectStock(t){const e=k();e.setSelectedStockCode(t.srtnCd),console.log("선택된 주식 코드:",e.selectedStockCode)},formatCurrency(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},created(){this.filteredStockList=this.uniqueKospiStockList}},w={class:"search-list-container"},x={class:"search-container"},B={class:"stock-list"},N=["onClick"],q=["src"],A={class:"stock-info"},Q={class:"stock-name"},D={class:"stock-code"},P={class:"stock-market-amount"};function b(t,e,h,m,c,r){return i(),a("div",w,[o("div",x,[f(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>c.searchQuery=s),placeholder:"검색어를 입력하세요",onInput:e[1]||(e[1]=(...s)=>r.filterData&&r.filterData(...s))},null,544),[[L,c.searchQuery]])]),o("div",B,[o("ul",null,[(i(!0),a(C,null,y(r.displayedStockList,s=>(i(),a("li",{key:s.srtnCd,class:g(["stock-item",{selected:s.srtnCd===r.stockStore.selectedStockCode}]),onClick:u=>r.selectStock(s)},[o("img",{src:s.thumbnail,class:"thumbnail"},null,8,q),o("div",A,[o("span",Q,n(s.itmsNm),1),o("span",D,"("+n(s.srtnCd)+")",1),o("span",P,n(r.formatCurrency(s.mrktTotAmt))+" 원",1)])],10,N))),128))])])])}const O=S(K,[["render",b],["__scopeId","data-v-0e0a2ceb"]]),V={components:{TradeImage:v,TradeNavigationBar:T,StockSearch:O},data(){return{kospiStockList:[]}},async mounted(){await this.fetchKOSPIStockList()},methods:{async fetchKOSPIStockList(){try{const t=await I.get("/api/stock/list/KOSPI");this.kospiStockList=Array.isArray(t.data)?t.data:[]}catch(t){console.error("Error fetching KOSPI Stock List:",t)}}}},$={class:"community-page"};function E(t,e,h,m,c,r){const s=l("TradeImage"),u=l("TradeNavigationBar"),p=l("StockSearch");return i(),a("div",$,[d(s),d(u),d(p,{kospiStockList:c.kospiStockList},null,8,["kospiStockList"])])}const j=S(V,[["render",E]]);export{j as default};
