import{_ as f,T as _,q as S,m as w,b as a,j as l,d as o,w as y,v as L,F as u,s as m,f as g,o as c,e as v,t as d,l as h}from"./index-BaR3L1cK.js";const C={components:{TradeImage:_,TradeNavigationBar:S},data(){return{kospiStockList:[],searchQuery:"",filteredStockList:[],showDropdown:!1}},computed:{uniqueKospiStockList(){const s=new Set;return this.kospiStockList.filter(e=>s.has(e.srtnCd)?!1:(s.add(e.srtnCd),!0))}},methods:{async fetchKOSPIStockList(){try{const s=await w.get("/api/stock/list/KOSPI");this.kospiStockList=Array.isArray(s.data)?s.data:[],this.kospiStockList.sort((e,i)=>Number(i.mrktTotAmt)-Number(e.mrktTotAmt))}catch(s){console.error("Error fetching KOSPI Stock List:",s)}},filterData(){const s=this.searchQuery.toLowerCase(),e=new Set;this.filteredStockList=this.uniqueKospiStockList.filter(i=>i.itmsNm.toLowerCase().includes(s)&&!e.has(i.itmsNm)?(e.add(i.itmsNm),!0):!1)},selectStock(s){this.searchQuery=s.itmsNm,this.showDropdown=!1},hideDropdown(){this.showDropdown=!1},formatCurrency(s){return s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},mounted(){this.fetchKOSPIStockList()}},N={class:"community-page"},D={class:"search-container"},T={key:0,class:"autocomplete-dropdown"},I=["onClick"],B={class:"stock-code"},x={class:"stock-list"},K=["src"],Q={class:"stock-info"},b={class:"stock-name"},A={class:"stock-code"},P={class:"stock-market-amount"};function V(s,e,i,q,r,n){const p=h("TradeImage"),k=h("TradeNavigationBar");return c(),a("div",N,[l(p),l(k),o("div",D,[y(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>r.searchQuery=t),placeholder:"검색어를 입력하세요",onInput:e[1]||(e[1]=(...t)=>n.filterData&&n.filterData(...t)),onFocus:e[2]||(e[2]=t=>r.showDropdown=!0),onBlur:e[3]||(e[3]=(...t)=>n.hideDropdown&&n.hideDropdown(...t))},null,544),[[L,r.searchQuery]]),r.showDropdown&&r.searchQuery&&r.filteredStockList.length?(c(),a("div",T,[o("ul",null,[(c(!0),a(u,null,m(r.filteredStockList,t=>(c(),a("li",{key:t.srtnCd,onClick:O=>n.selectStock(t)},[v(d(t.itmsNm)+" ",1),o("span",B,"("+d(t.srtnCd)+")",1)],8,I))),128))])])):g("",!0)]),o("div",x,[o("ul",null,[(c(!0),a(u,null,m(n.uniqueKospiStockList.slice(0,10),t=>(c(),a("li",{key:t.srtnCd,class:"stock-item"},[o("img",{src:t.thumbnail,class:"thumbnail"},null,8,K),o("div",Q,[o("span",b,d(t.itmsNm),1),o("span",A,"("+d(t.srtnCd)+")",1),o("span",P,d(n.formatCurrency(t.mrktTotAmt))+" 원",1)])]))),128))])])])}const E=f(C,[["render",V],["__scopeId","data-v-da834a35"]]);export{E as default};
